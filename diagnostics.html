<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Diagnostics</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: white;
            line-height: 1.6;
        }
        .diagnostic-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 8px;
            background: #2a2a2a;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
        .status.success { background: #0f5132; color: #d1e7dd; }
        .status.error { background: #842029; color: #f8d7da; }
        .status.warning { background: #664d03; color: #fff3cd; }
        .status.loading { background: #055160; color: #cff4fc; }
        pre {
            background: #1a1a1a;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            max-height: 200px;
            overflow-y: auto;
        }
        .test-button {
            background: #4a90e2;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #357abd;
        }
        iframe {
            width: 100%;
            height: 400px;
            border: 1px solid #333;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üîß Portfolio Website Diagnostics</h1>
    
    <div class="diagnostic-section">
        <h2>üöÄ Quick Actions</h2>
        <button class="test-button" onclick="openMainSite()">Open Main Site</button>
        <button class="test-button" onclick="runImageTest()">Test Images</button>
        <button class="test-button" onclick="checkSections()">Check Sections</button>
        <button class="test-button" onclick="runFullDiagnostic()">Full Diagnostic</button>
    </div>

    <div class="diagnostic-section">
        <h2>üìä Server Status</h2>
        <div>HTTP Server: <span id="server-status" class="status loading">Checking...</span></div>
        <div>Server URL: <a href="http://localhost:8000" target="_blank">http://localhost:8000</a></div>
    </div>

    <div class="diagnostic-section">
        <h2>üóÇÔ∏è File Structure Check</h2>
        <div id="file-structure" class="status loading">Checking...</div>
        <pre id="file-list"></pre>
    </div>

    <div class="diagnostic-section">
        <h2>üñºÔ∏è Image Loading Status</h2>
        <div id="image-status" class="status loading">Checking...</div>
        <div id="image-details"></div>
    </div>

    <div class="diagnostic-section">
        <h2>üìã Section Navigation Test</h2>
        <div id="section-status" class="status loading">Checking...</div>
        <div id="section-details"></div>
    </div>

    <div class="diagnostic-section">
        <h2>üìÑ Console Logs</h2>
        <pre id="console-logs">Console logs will appear here...</pre>
    </div>

    <div class="diagnostic-section">
        <h2>üñ•Ô∏è Website Preview</h2>
        <iframe id="site-preview" src="about:blank"></iframe>
    </div>

    <script>
        // Capture console logs
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        let consoleLogs = [];

        function logToConsole(type, ...args) {
            const timestamp = new Date().toLocaleTimeString();
            const message = args.join(' ');
            consoleLogs.push(`[${timestamp}] ${type.toUpperCase()}: ${message}`);
            updateConsoleLogs();
            
            // Call original console method
            if (type === 'log') originalLog(...args);
            else if (type === 'error') originalError(...args);
            else if (type === 'warn') originalWarn(...args);
        }

        console.log = (...args) => logToConsole('log', ...args);
        console.error = (...args) => logToConsole('error', ...args);
        console.warn = (...args) => logToConsole('warn', ...args);

        function updateConsoleLogs() {
            document.getElementById('console-logs').textContent = 
                consoleLogs.slice(-20).join('\n');
        }

        async function checkServerStatus() {
            try {
                const response = await fetch('http://localhost:8000');
                if (response.ok) {
                    document.getElementById('server-status').textContent = 'Running';
                    document.getElementById('server-status').className = 'status success';
                    return true;
                } else {
                    throw new Error('Server responded with error');
                }
            } catch (error) {
                document.getElementById('server-status').textContent = 'Not Running';
                document.getElementById('server-status').className = 'status error';
                console.error('Server check failed:', error);
                return false;
            }
        }

        async function checkFileStructure() {
            const requiredFiles = [
                'index.html',
                'css/style.css',
                'js/script.js',
                'data/projects.json',
                'data/blogs.json',
                'assets/images/profile.jpg'
            ];

            const results = [];
            for (const file of requiredFiles) {
                try {
                    const response = await fetch(`http://localhost:8000/${file}`);
                    const exists = response.ok;
                    results.push(`${exists ? '‚úÖ' : '‚ùå'} ${file}`);
                } catch (error) {
                    results.push(`‚ùå ${file} (Error: ${error.message})`);
                }
            }

            document.getElementById('file-list').textContent = results.join('\n');
            
            const allExist = results.every(r => r.startsWith('‚úÖ'));
            document.getElementById('file-structure').textContent = 
                allExist ? 'All files found' : 'Some files missing';
            document.getElementById('file-structure').className = 
                allExist ? 'status success' : 'status error';
        }

        async function checkImages() {
            const imageUrls = [
                'assets/images/profile.jpg',
                'assets/animation/image.png',
                'assets/animation/tensorflow.png',
                'assets/icons/skills.png'
            ];

            let loaded = 0;
            let failed = 0;
            const details = [];

            for (const url of imageUrls) {
                try {
                    const response = await fetch(`http://localhost:8000/${url}`);
                    if (response.ok) {
                        loaded++;
                        details.push(`‚úÖ ${url}`);
                    } else {
                        failed++;
                        details.push(`‚ùå ${url} (Status: ${response.status})`);
                    }
                } catch (error) {
                    failed++;
                    details.push(`‚ùå ${url} (Error: ${error.message})`);
                }
            }

            document.getElementById('image-details').innerHTML = 
                `<div>Loaded: ${loaded}, Failed: ${failed}</div><pre>${details.join('\n')}</pre>`;
            
            document.getElementById('image-status').textContent = 
                failed === 0 ? 'All images accessible' : `${failed} images failed`;
            document.getElementById('image-status').className = 
                failed === 0 ? 'status success' : 'status error';
        }

        function checkSections() {
            const sections = ['home', 'about', 'projects', 'blogs', 'contact'];
            const details = [];
            
            // This would need to be run in the context of the main site
            fetch('http://localhost:8000/index.html')
                .then(response => response.text())
                .then(html => {
                    sections.forEach(section => {
                        const hasSection = html.includes(`id="${section}"`);
                        const hasNavLink = html.includes(`href="#${section}"`);
                        details.push(`${hasSection && hasNavLink ? '‚úÖ' : '‚ùå'} ${section} section`);
                    });
                    
                    document.getElementById('section-details').innerHTML = 
                        `<pre>${details.join('\n')}</pre>`;
                    
                    const allSections = details.every(d => d.startsWith('‚úÖ'));
                    document.getElementById('section-status').textContent = 
                        allSections ? 'All sections found' : 'Some sections missing';
                    document.getElementById('section-status').className = 
                        allSections ? 'status success' : 'status error';
                })
                .catch(error => {
                    document.getElementById('section-status').textContent = 'Check failed';
                    document.getElementById('section-status').className = 'status error';
                    console.error('Section check failed:', error);
                });
        }

        function openMainSite() {
            window.open('http://localhost:8000', '_blank');
        }

        function runImageTest() {
            window.open('http://localhost:8000/image-test.html', '_blank');
        }

        function loadSitePreview() {
            document.getElementById('site-preview').src = 'http://localhost:8000';
        }

        async function runFullDiagnostic() {
            console.log('Running full diagnostic...');
            
            await checkServerStatus();
            await checkFileStructure();
            await checkImages();
            checkSections();
            
            setTimeout(loadSitePreview, 1000);
            
            console.log('Full diagnostic completed');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Diagnostics page loaded');
            runFullDiagnostic();
        });
    </script>
</body>
</html>
